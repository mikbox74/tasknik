(this.webpackJsonptasknik=this.webpackJsonptasknik||[]).push([[0],[,,,,function(e){e.exports=JSON.parse('{"name":"tasknik","version":"0.1.3","private":true,"homepage":"http://mikbox74.github.io/tasknik","dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","gh-pages":"^2.2.0","prop-types":"^15.7.2","react":"^16.12.0","react-dom":"^16.12.0","react-scripts":"3.3.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),i=n.n(o),l=(n(10),n(1)),c=(n(11),r.a.createContext()),u=function(e){var t=function(e,t){return(e+"").padStart(t,"0")},n=parseFloat(e).toFixed(3),a=Math.floor(n/60/60),r=Math.floor(n/60)%60,o=Math.floor(n-60*r);return t(a,2)+":"+t(r,2)+":"+("000"+o).slice(-1*2)},s={li:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"}};var d=function(e){var t=e.project,n=e.todo,a=(e.index,e.currentId),o=r.a.useContext(c),i=o.removeTodo,l=o.toggleTodo,d=o.toggleGo,m=["todoTitle"];return n.completed&&m.push("done"),n.id===a&&m.push("go"),r.a.createElement("li",{style:s.li},r.a.createElement("span",{className:m.join(" ")},r.a.createElement("span",{className:"action goAction",onClick:d.bind(null,n.id)}),r.a.createElement("span",{className:"action doneAction",onClick:l.bind(null,n.id)}),r.a.createElement("span",{className:"text duration"},u(n.duration)),r.a.createElement("span",{className:"text title"},r.a.createElement("strong",null,t.title,":"),"\xa0",n.title),r.a.createElement("span",{className:"text money"},Math.round(n.money))),r.a.createElement("button",{className:"action removeAction",onClick:i.bind(null,n.id)},"\xa0"))},m={ul:{listStyle:"none",textAlign:"left",margin:0,padding:0,width:"100%"}};var p=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("ul",{style:m.ul},e.todos.map((function(t,n){var a=e.projects.find((function(e){return e.id===t.projectId}));return r.a.createElement(d,{currentId:e.currentId,project:a,todo:t,key:t.id,index:n})}))))},f={form:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"},input:{paddingLeft:"1rem",flexGrow:1,border:0,height:"1.5rem"},button:{cursor:"pointer",background:"#00FFA9",color:"#fff",border:0,height:"1.5rem"}};var g=function(e){var t=r.a.useContext(c).addTodo,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.a.useState(e),n=Object(l.a)(t,2),a=n[0],o=n[1];return{bind:{value:a,onChange:function(e){return o(e.target.value)}},clear:function(){return o("")},title:function(){return a}}}(""),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.a.useState(e),n=Object(l.a)(t,2),a=n[0],o=n[1];return{onChange:function(e){return o(e.target.value)},clear:function(){return o("")},projectId:a}}("");return r.a.createElement("form",{style:f.form,onSubmit:function(e){e.preventDefault(),n.title().trim()&&a.projectId?(console.log("projectId: "+a.projectId),t(n.title(),a.projectId),n.clear(),a.clear()):alert("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442")}},r.a.createElement("div",null,"\u0417\u0430\u0434\u0430\u0447\u0443"),r.a.createElement("input",Object.assign({placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",style:f.input},n.bind)),r.a.createElement("select",{style:f.input,value:a.projectId,onChange:a.onChange},r.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442..."),e.projects.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.title,": ",e.tariff)}))),r.a.createElement("button",{style:f.button,type:"submit"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"))},v={form:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"},input:{paddingLeft:"1rem",flexGrow:1,border:0,height:"1.5rem"},button:{cursor:"pointer",background:"#293685",color:"#fff",border:0,height:"1.5rem"}};function b(){var e=r.a.useContext(c).addProject,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.a.useState(e),n=Object(l.a)(t,2),a=n[0],o=n[1];return{bind:{value:a,onChange:function(e){return o(e.target.value)}},clear:function(){return o("")},title:function(){return a}}}(""),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.a.useState(e),n=Object(l.a)(t,2),a=n[0],o=n[1];return{bind:{value:a,onChange:function(e){return o(e.target.value)}},clear:function(){return o("")},tariff:function(){return a}}}("");return r.a.createElement("form",{style:v.form,onSubmit:function(a){a.preventDefault(),t.title().trim()?(e(t.title(),n.tariff()),t.clear(),n.clear()):alert("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")}},r.a.createElement("div",null,"\u041f\u0440\u043e\u0435\u043a\u0442"),r.a.createElement("input",Object.assign({placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",style:v.input},t.bind)),r.a.createElement("input",Object.assign({placeholder:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0447\u0430\u0441\u0430",style:v.input},n.bind)),r.a.createElement("button",{style:v.button,type:"submit"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"))}var h=function(e){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.rel="shortcut icon",document.head.appendChild(t)),t.href=e};n(12);var E=function(e){var t=r.a.useContext(c).setIsModalOpen,n=e.projects.map((function(t){var n=e.todos.map((function(e){return e.projectId==t.id?e.tmpDuration:0})).reduce((function(e,t){return e+t}));return{id:t.id,title:t.title,tmpDuration:n}}));return r.a.createElement(r.a.Fragment,null,e.isOpen&&r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("h2",null,"\u041f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c"),n.map((function(e){if(e.tmpDuration)return r.a.createElement("p",{key:e.id},e.title,": ",u(e.tmpDuration))})),r.a.createElement("button",{onClick:function(){return t(!1)}},"\xd7"))))},j=n(4);var y=function(){var e=r.a.useState([]),t=Object(l.a)(e,2),n=t[0],a=t[1],o=r.a.useState([]),i=Object(l.a)(o,2),s=i[0],d=i[1],m=r.a.useState(0),f=Object(l.a)(m,2),v=f[0],y=f[1],x=r.a.useState(0),I=Object(l.a)(x,2),k=I[0],S=I[1],C=r.a.useState(0),O=Object(l.a)(C,2),w=O[0],N=O[1],T=r.a.useState(!1),D=Object(l.a)(T,2),A=D[0],J=D[1];r.a.useEffect((function(){var e=localStorage.getItem("todos");e&&a(JSON.parse(e));var t=localStorage.getItem("projects");t&&d(JSON.parse(t));var n=localStorage.getItem("totalTime");n&&y(n)}),[]),r.a.useEffect((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]),r.a.useEffect((function(){localStorage.setItem("projects",JSON.stringify(s))}),[s]),r.a.useEffect((function(){localStorage.setItem("totalTime",v)}),[v]),r.a.useEffect((function(){console.log(k),k?(clearInterval(w),h("./favicon-go.ico"),N(setInterval((function(){a(n.map((function(e){return e.id===k&&(e.duration++,e.tmpDuration||(e.tmpDuration=0),e.tmpDuration++,e.duration%60===0&&(e.money+=e.minuteCost),y((function(e){return parseInt(e,10)+1}))),e})))}),1e3))):(clearInterval(w),h("./favicon.ico"))}),[k]);var M=n.filter((function(e){return!e.completed})),B=n.filter((function(e){return e.completed})),F={removeTodo:function(e){console.log("removeTodo "+e),a(n.filter((function(t){return t.id!==e})))},toggleTodo:function(e){console.log("toggleTodo "+e),a(n.map((function(t){return t.id===e&&(t.completed=!t.completed,t.completed&&e===k&&S(0)),t})))},addTodo:function(e,t){console.log("addTodo "+e),t=parseInt(t,10);var r=s.find((function(e){return e.id===t}));a(n.concat([{id:Date.now(),projectId:t,title:e,completed:!1,duration:0,money:0,minuteCost:parseInt(r.tariff,10)/60,tmpDuration:0}]))},editTodo:function(e,t){console.log("editTodo "+e);var r=n.findIndex((function(t){return t.id===e}));console.log(n[r].title=t),a(n)},addProject:function(e,t){console.log("addProject "+e),d(s.concat([{id:Date.now(),title:e,tariff:parseInt(t,10)}]))},toggleGo:function(e){console.log("toggleGo "+e);for(var t=0;t<n.length;t++)if(n[t].id===e&&!n[t].completed){S(e===k?0:e);break}},setIsModalOpen:J};return r.a.createElement(c.Provider,{value:F},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",null,r.a.createElement("img",{src:"./time-2-32.png",alt:"Tasknik"}),"\xa0 Tasknik v.",j.version)),r.a.createElement("div",{className:"App-content"},r.a.createElement("div",null,M.length?r.a.createElement(p,{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",todos:M,projects:s,currentId:k}):r.a.createElement("p",null,"\u041d\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447"),r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),r.a.createElement(g,{projects:s}),r.a.createElement(b,null),B.length?r.a.createElement(p,{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",todos:B,projects:s,currentId:k}):r.a.createElement("p",null,"\u041d\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447"))),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("div",{className:"totalTimer",onClick:function(){return J(!0)}},"\u0412\u0441\u0435\u0433\u043e: ",u(v)," \xa0"),r.a.createElement("span",{title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043e\u0431\u0449\u0438\u0439 \u0442\u0430\u0439\u043c\u0435\u0440",className:"action resetTotalAction",onClick:function(){return y(0),void a(n.map((function(e){return e.tmpDuration=0,e})))}}))),r.a.createElement(E,{isOpen:A,todos:n,projects:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.7146efaa.chunk.js.map
(this.webpackJsonptasknik=this.webpackJsonptasknik||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(3),c=n.n(r),l=(n(9),n(1)),i=(n(10),a.a.createContext()),u=function(e){var t=function(e,t){return("000"+e).slice(-1*t)},n=parseFloat(e).toFixed(3),o=Math.floor(n/60/60),a=Math.floor(n/60)%60,r=Math.floor(n-60*a);return t(o,2)+":"+t(a,2)+":"+t(r,2)},d={li:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"}};var s=function(e){var t=e.project,n=e.todo,o=(e.index,e.currentId),r=a.a.useContext(i),c=r.removeTodo,l=r.toggleTodo,s=r.toggleGo,m=["todoTitle"];return n.completed&&m.push("done"),n.id===o&&m.push("go"),a.a.createElement("li",{style:d.li},a.a.createElement("span",{className:m.join(" ")},a.a.createElement("span",{className:"action goAction",onClick:s.bind(null,n.id)}),a.a.createElement("span",{className:"action doneAction",onClick:l.bind(null,n.id)}),a.a.createElement("span",{className:"text duration"},u(n.duration)),a.a.createElement("span",{className:"text title"},a.a.createElement("strong",null,t.title,":"),"\xa0",n.title),a.a.createElement("span",{className:"text money"},Math.round(n.money))),a.a.createElement("button",{className:"action removeAction",onClick:c.bind(null,n.id)},"\xa0"))},m={ul:{listStyle:"none",textAlign:"left",margin:0,padding:0,width:"100%"}};var f=function(e){return a.a.createElement("ul",{style:m.ul},e.todos.map((function(t,n){var o=e.projects.find((function(e){return e.id===t.projectId}));return a.a.createElement(s,{currentId:e.currentId,project:o,todo:t,key:t.id,index:n})})))},p={form:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"},input:{paddingLeft:"1rem",flexGrow:1,border:0,height:"1.5rem"},button:{cursor:"pointer",background:"#00FFA9",color:"#fff",border:0,height:"1.5rem"}};var g=function(e){var t=a.a.useContext(i).addTodo,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.a.useState(e),n=Object(l.a)(t,2),o=n[0],r=n[1];return{bind:{value:o,onChange:function(e){return r(e.target.value)}},clear:function(){return r("")},title:function(){return o}}}(""),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.a.useState(e),n=Object(l.a)(t,2),o=n[0],r=n[1];return{onChange:function(e){return r(e.target.value)},clear:function(){return r("")},projectId:o}}("");return a.a.createElement("form",{style:p.form,onSubmit:function(e){e.preventDefault(),n.title().trim()&&o.projectId?(console.log("projectId: "+o.projectId),t(n.title(),o.projectId),n.clear(),o.clear()):alert("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442")}},a.a.createElement("input",Object.assign({placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",style:p.input},n.bind)),a.a.createElement("select",{style:p.input,value:o.projectId,onChange:o.onChange},a.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442..."),e.projects.map((function(e,t){return a.a.createElement("option",{key:e.id,value:e.id},e.title,": ",e.tariff)}))),a.a.createElement("button",{style:p.button,type:"submit"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"))},v={form:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",padding:".5rem",boxShadow:"1px 1px 4px 0px rgba(0,0,0,.5)"},input:{paddingLeft:"1rem",flexGrow:1,border:0,height:"1.5rem"},button:{cursor:"pointer",background:"#293685",color:"#fff",border:0,height:"1.5rem"}};function b(){var e=a.a.useContext(i).addProject,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.a.useState(e),n=Object(l.a)(t,2),o=n[0],r=n[1];return{bind:{value:o,onChange:function(e){return r(e.target.value)}},clear:function(){return r("")},title:function(){return o}}}(""),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.a.useState(e),n=Object(l.a)(t,2),o=n[0],r=n[1];return{bind:{value:o,onChange:function(e){return r(e.target.value)}},clear:function(){return r("")},tariff:function(){return o}}}("");return a.a.createElement("form",{style:v.form,onSubmit:function(o){o.preventDefault(),t.title().trim()?(e(t.title(),n.tariff()),t.clear(),n.clear()):alert("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")}},a.a.createElement("input",Object.assign({placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",style:v.input},t.bind)),a.a.createElement("input",Object.assign({placeholder:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0447\u0430\u0441\u0430",style:v.input},n.bind)),a.a.createElement("button",{style:v.button,type:"submit"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"))}var h=function(e){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.rel="shortcut icon",document.head.appendChild(t)),t.href=e};var E=function(){var e=a.a.useState([]),t=Object(l.a)(e,2),n=t[0],o=t[1],r=a.a.useState([]),c=Object(l.a)(r,2),d=c[0],s=c[1],m=a.a.useState(0),p=Object(l.a)(m,2),v=p[0],E=p[1],j=a.a.useState(0),x=Object(l.a)(j,2),y=x[0],I=x[1],S=a.a.useState(0),k=Object(l.a)(S,2),C=k[0],w=k[1];return a.a.useEffect((function(){var e=localStorage.getItem("todos");e&&o(JSON.parse(e));var t=localStorage.getItem("projects");t&&s(JSON.parse(t));var n=localStorage.getItem("totalTime");n&&E(n)}),[]),a.a.useEffect((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]),a.a.useEffect((function(){localStorage.setItem("projects",JSON.stringify(d))}),[d]),a.a.useEffect((function(){localStorage.setItem("totalTime",v)}),[v]),a.a.useEffect((function(){console.log(y),y?(clearInterval(C),h("/favicon-go.ico"),w(setInterval((function(){o(n.map((function(e){return e.id===y&&(e.duration++,e.duration%60===0&&(e.money+=e.minuteCost),E((function(e){return parseInt(e,10)+1}))),e})))}),1e3))):(clearInterval(C),h("/favicon.ico"))}),[y]),a.a.createElement(i.Provider,{value:{removeTodo:function(e){console.log("removeTodo "+e),o(n.filter((function(t){return t.id!==e})))},toggleTodo:function(e){console.log("toggleTodo "+e),o(n.map((function(t){return t.id===e&&(t.completed=!t.completed,t.completed&&e===y&&I(0)),t})))},addTodo:function(e,t){console.log("addTodo "+e),t=parseInt(t,10);var a=d.find((function(e){return e.id===t}));o(n.concat([{id:Date.now(),projectId:t,title:e,completed:!1,duration:0,money:0,minuteCost:parseInt(a.tariff,10)/60}]))},editTodo:function(e,t){console.log("editTodo "+e);var a=n.findIndex((function(t){return t.id===e}));console.log(n[a].title=t),o(n)},addProject:function(e,t){console.log("addProject "+e),s(d.concat([{id:Date.now(),title:e,tariff:parseInt(t,10)}]))},toggleGo:function(e){console.log("toggleGo "+e);for(var t=0;t<n.length;t++)if(n[t].id===e&&!n[t].completed){I(e===y?0:e);break}}}},a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("div",null,a.a.createElement("img",{src:"/time-2-32.png",alt:"Tasknik"}),"\xa0 Tasknik")),a.a.createElement("div",{className:"App-content"},a.a.createElement("div",null,n.length?a.a.createElement(f,{todos:n,projects:d,currentId:y}):a.a.createElement("p",null,"\u041d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447"),a.a.createElement(g,{projects:d}),a.a.createElement(b,null))),a.a.createElement("footer",{className:"App-footer"},a.a.createElement("div",null,"\u0412\u0441\u0435\u0433\u043e: ",u(v)," \xa0"),a.a.createElement("span",{title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043e\u0431\u0449\u0438\u0439 \u0442\u0430\u0439\u043c\u0435\u0440",className:"action resetTotalAction",onClick:function(){return E(0)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[4,1,2]]]);
//# sourceMappingURL=main.0bb60217.chunk.js.map